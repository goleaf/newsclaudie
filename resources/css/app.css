@import "tailwindcss";

@layer base {
    [x-cloak] {
        display: none;
    }

    /* Smooth scrolling for better UX */
    html {
        scroll-behavior: smooth;
    }

    /* Respect reduced motion preferences */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
    }
}

@layer components {
    .featured-post-image {
        display: block;
        height: 240px;
        width: 100%;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    .post-header-image {
        display: block;
        height: 320px;
        width: 100%;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    @media screen and (max-width: 375px) {
        .featured-post-image {
            height: 180px;
        }

        .post-header-image {
            max-height: 240px;
        }
    }

    body.disable-scroll {
        height: 100vh;
        overflow: hidden;
    }

    body.disable-scroll #theme-toggle {
        display: none;
    }

    pre {
        @apply my-4 overflow-x-auto rounded;
    }

    pre.torchlight {
        @apply p-0;
    }

    pre code.torchlight {
        @apply block min-w-max py-4;
    }

    pre code.torchlight .line {
        @apply px-4;
    }

    pre code.torchlight .line-number,
    pre code.torchlight .summary-caret {
        @apply mr-4;
    }

    .editor-toolbar {
        background-color: #fff;
        opacity: 0.9;
    }

    .admin-row-selected {
        @apply ring-2 ring-indigo-500/70 ring-offset-1 ring-offset-white dark:ring-indigo-400/70 dark:ring-offset-slate-900;
    }

    /* Optimistic UI animations */
    @keyframes optimistic-pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.7;
        }
    }

    .optimistic-update {
        animation: optimistic-pulse 0.6s ease-in-out;
    }

    @keyframes optimistic-success {
        0% {
            background-color: rgb(34 197 94 / 0.1);
        }
        100% {
            background-color: transparent;
        }
    }

    .optimistic-success {
        animation: optimistic-success 1s ease-out;
    }

    @keyframes optimistic-error {
        0%, 100% {
            transform: translateX(0);
        }
        25% {
            transform: translateX(-4px);
        }
        75% {
            transform: translateX(4px);
        }
    }

    .optimistic-error {
        animation: optimistic-error 0.4s ease-in-out;
        background-color: rgb(239 68 68 / 0.1);
    }

    /* Surface component glassmorphism support */
    .surface-glass {
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
    }

    /* Icon component - ensure proper alignment */
    .icon-inline {
        display: inline-block;
        vertical-align: middle;
    }

    /* Smooth transitions for interactive surfaces */
    .surface-interactive {
        transition-property: transform, box-shadow;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 200ms;
    }

    .surface-interactive:hover {
        transform: translateY(-2px);
    }

    .surface-interactive:active {
        transform: translateY(0);
    }

    /* Animation keyframes for component transitions */
    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes slideUp {
        from {
            transform: translateY(10px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    @keyframes scaleIn {
        from {
            transform: scale(0.95);
            opacity: 0;
        }
        to {
            transform: scale(1);
            opacity: 1;
        }
    }

    @keyframes slideInRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    @keyframes slideOutRight {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }

    /* Animation utility classes */
    .animate-fade-in {
        animation: fadeIn 0.3s ease-in-out;
    }

    .animate-slide-up {
        animation: slideUp 0.3s ease-out;
    }

    .animate-scale-in {
        animation: scaleIn 0.2s ease-out;
    }

    .animate-slide-in-right {
        animation: slideInRight 0.3s ease-out;
    }

    .animate-slide-out-right {
        animation: slideOutRight 0.2s ease-in;
    }

    /* Focus visible styles for accessibility */
    *:focus-visible {
        outline: 2px solid rgb(99 102 241);
        outline-offset: 2px;
        border-radius: 0.25rem;
    }

    /* Dark mode focus styles */
    .dark *:focus-visible {
        outline-color: rgb(129 140 248);
    }
}
